<html>
<head>
    <link rel="stylesheet" href="admin.css">
    <meta charset="UTF-8">
    <script src="vendor/vue.min.js"></script>
    <script src="vendor/vue-resource.min.js"></script>
    <style>
        [v-cloak] {
            display: none;
        }
    </style>
</head>
<body>
<section class="adminapp">
    <header class="header">
        <h1>Welcome to pretixSCAN-Proxy</h1>
    </header>
    <div v-if="loading > 0">
        <svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg" fill="#3b1c4a">
            <circle cx="15" cy="15" r="15">
                <animate attributeName="r" from="15" to="15"
                         begin="0s" dur="0.8s"
                         values="15;9;15" calcMode="linear"
                         repeatCount="indefinite"/>
                <animate attributeName="fill-opacity" from="1" to="1"
                         begin="0s" dur="0.8s"
                         values="1;.5;1" calcMode="linear"
                         repeatCount="indefinite"/>
            </circle>
            <circle cx="60" cy="15" r="9" fill-opacity="0.3">
                <animate attributeName="r" from="9" to="9"
                         begin="0s" dur="0.8s"
                         values="9;15;9" calcMode="linear"
                         repeatCount="indefinite"/>
                <animate attributeName="fill-opacity" from="0.5" to="0.5"
                         begin="0s" dur="0.8s"
                         values=".5;1;.5" calcMode="linear"
                         repeatCount="indefinite"/>
            </circle>
            <circle cx="105" cy="15" r="15">
                <animate attributeName="r" from="15" to="15"
                         begin="0s" dur="0.8s"
                         values="15;9;15" calcMode="linear"
                         repeatCount="indefinite"/>
                <animate attributeName="fill-opacity" from="1" to="1"
                         begin="0s" dur="0.8s"
                         values="1;.5;1" calcMode="linear"
                         repeatCount="indefinite"/>
            </circle>
        </svg>
    </div>
    <section class="main" v-if="!state.configured && loading == 0">
        Upstream URL: <input v-model="config_url" placeholder="https://pretix.eu"><br>
        Token: <input v-model="config_token"><br>
        <button type="button" @click="configure">Configure</button>
    </section>
    <section class="main" v-if="state.configured">
        <strong>Upstream URL:</strong> {{state.upstreamUrl}}<br>
        <strong>Organizer:</strong> {{state.organizer}}<br>
        <strong>Last sync:</strong> {{state.lastSync}}<br>
        <strong>Last download:</strong> {{state.lastDownload}}<br>
        <strong>Last failed sync:</strong> {{state.lastFailedSync}}<br>
        <strong>Last failed sync message:</strong> {{state.lastFailedSyncMsg}}<br>
        <button type="button" @click="sync">Trigger Sync</button>
    </section>
</section>
<script src="admin.js"></script>
</body>
</html>